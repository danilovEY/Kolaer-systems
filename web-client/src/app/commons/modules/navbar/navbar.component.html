<nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar light-blue lighten-2" #nav>

    <a class="navbar-brand" href="#">
        <img src="assets/img/aerIcon.png" height="50" class="d-inline-block align-center" alt="">
        Колатомэнергоремонт
    </a>

    <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#" mdbRippleRadius>Home <span class="sr-only">(current)</span></a>
            </li>
        </ul>

        <ul class="navbar-nav ml-auto nav-flex-icons">
            <li class="nav-item avatar dropdown" dropdown>

                <a *ngIf="!authenticationService.isAuthentication()" dropdownToggle mdbRippleRadius class="nav-link dropdown-toggle waves-effect waves-light">
                    <img src="assets/img/no_photo.jpg" class="rounded-circle z-depth-0" alt="avatar image" style="height: 35px;">
                    Вы не авторизованы
                </a>

                <a *ngIf="authenticationService.isAuthentication()" dropdownToggle mdbRippleRadius class="nav-link dropdown-toggle waves-effect waves-light">
                    <img src="assets/img/no_photo.jpg" class="rounded-circle z-depth-0" alt="avatar image" style="height: 35px;">
                    {{ authenticationService.getAccountModel()?.username }}
                </a>

                <div class="dropdown-menu dropdown-primary">
                    <a *ngIf="!authenticationService.isAuthentication()" class="dropdown-item" (click)="loginModal.show()" mdbRippleRadius>Авторизация</a>
                    <a *ngIf="authenticationService.isAuthentication()" class="dropdown-item" (click)="logoutSubmit()" mdbRippleRadius>Выход</a>
                </div>
            </li>
        </ul>
    </div>
</nav>

<!--Modal: Login Form-->
<div mdbModal #loginModal="mdb-modal" class="modal fade" id="modalLogin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog cascading-modal">
        <!--Content-->
        <div class="modal-content">

            <!--Header-->
            <div class="modal-header light-blue lighten-2 white-text">
                <h4 class="title"><i class="fa fa-user"></i> Авторизация</h4>
                <button type="button" class="close waves-effect waves-light" data-dismiss="modal" aria-label="Close" (click)="loginModal.hide()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>

            <ul class="list-group loginErrorMessage" *ngIf="serverError != undefined">
                <li class="list-group-item list-group-item-danger"> {{ serverError?.message }}</li>
            </ul>

            <!--Body-->
            <form (ngSubmit)="submitLogin()" [formGroup]="loginForm">
                <div class="modal-body">
                    <div class="md-form form-sm">
                        <i class="fa fa-envelope prefix"></i>
                        <input mdbActive type="text" id="loginInput"
                               [ngClass]="{'loginErrorMessage': loginForm.controls['username'].touched && loginForm.controls['username'].invalid}"
                               class="form-control" formControlName="username">
                        <label for="loginInput">Логин</label>
                    </div>

                    <ul class="list-group loginErrorMessage" *ngIf="loginForm.controls['username'].touched && loginForm.controls['username'].invalid">
                        <li class="list-group-item list-group-item-danger" *ngIf="loginForm.controls['username'].errors?.required">Логин не может быть пустым</li>
                        <li class="list-group-item list-group-item-danger" *ngIf="loginForm.controls['username'].errors?.minlength">Логин должен быть больше 3 символов</li>
                    </ul>

                    <div class="md-form form-sm">
                        <i class="fa fa-lock prefix"></i>
                        <input mdbActive id="passwordInput" type="password" class="form-control" formControlName="password">
                        <label for="passwordInput">Пароль</label>
                    </div>


                    <div class="text-center mt-2">
                        <button type="submit" class="btn btn-info waves-light" mdbRippleRadius [disabled]="loginForm.invalid">
                            Войти
                            <i class="fa fa-sign-in ml-1"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <!--/.Content-->
    </div>
</div>
<!--Modal: Login Form-->

<div mdbModal #successModal="mdb-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-notify modal-success" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <p class="heading lead">Авторизация прошла успешно</p>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="successModal.hide()">
                    <span aria-hidden="true" class="white-text">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <i class="fa fa-check fa-4x mb-3 animated rotateIn"></i>
                    <p>Добро пожаловать {{ authenticationService.getAccountModel()?.username }}</p>
                </div>
            </div>
            <div class="modal-footer justify-content-center">
                <a type="button" class="btn btn-primary-modal waves-light" mdbRippleRadius (click)="successModal.hide()">OK<i class="fa fa-diamond ml-1"></i></a>
            </div>
        </div>
    </div>
</div>